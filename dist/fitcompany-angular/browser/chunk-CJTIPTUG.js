import{a as _}from"./chunk-F2O2KMQN.js";import{c as h,d as y}from"./chunk-BMDPQX4J.js";import{b as w,c as p,d as M,e as S,g as k,h as E,k as I,p as C,r as L}from"./chunk-R2MBKBQG.js";import"./chunk-Y5NMKK7J.js";import{Ca as f,Ga as u,Nb as v,R as m,Sa as l,Sb as x,Ta as t,Ua as r,Va as c,Za as b,_a as g,eb as a,gb as d,ta as n}from"./chunk-4VXNIXON.js";function T(i,s){if(i&1&&(t(0,"div",17),a(1),r()),i&2){let o=g();n(),d(" ",o.okMsg," ")}}function D(i,s){if(i&1&&(t(0,"div",18),a(1),r()),i&2){let o=g();n(),d(" ",o.errorMsg," ")}}function G(i,s){i&1&&(t(0,"p",19),a(1," Ingresa un correo v\xE1lido. "),r())}function V(i,s){i&1&&(t(0,"p",19),a(1," La contrase\xF1a es obligatoria. "),r())}var N=class i{fb=m(C);auth=m(_);router=m(h);hide=!0;saving=!1;okMsg="";errorMsg="";form=this.fb.nonNullable.group({email:["",[p.required,p.email]],password:["",[p.required]]});autoHideMessages(s=4e3){window.setTimeout(()=>{this.okMsg="",this.errorMsg=""},s)}submit(){if(this.form.invalid||this.saving)return;this.saving=!0,this.okMsg="",this.errorMsg="";let s={correo:this.form.value.email,password:this.form.value.password};this.auth.login(s).subscribe({next:o=>{this.auth.saveToken(o.token),this.router.navigate(["/dashboard"],{replaceUrl:!0})},error:o=>{this.errorMsg=o?.error?.message||"Error al iniciar sesi\xF3n",this.saving=!1,this.autoHideMessages()}})}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=f({type:i,selectors:[["app-login"]],decls:27,vars:9,consts:[[1,"dark","bg-surface-900","min-h-screen","text-textc-base"],[1,"container-page"],[1,"min-h-[70vh]","flex","items-center","justify-center"],[1,"w-full","max-w-md","rounded-2xl","bg-surface-800","border","border-white/5","shadow","p-6","sm:p-8"],[1,"text-xl","font-bold","mb-6","text-center"],["class","mb-4 rounded-xl border border-green-500/40 bg-green-500/10 px-4 py-3 text-green-300 text-center",4,"ngIf"],["class","mb-4 rounded-xl border border-red-500/40 bg-red-500/10 px-4 py-3 text-red-300 text-center whitespace-pre-line",4,"ngIf"],["novalidate","",1,"space-y-4",3,"ngSubmit","formGroup"],[1,"block","text-sm","mb-1"],["type","email","formControlName","email","placeholder","tucorreo@dominio.com","autocomplete","email",1,"w-full","rounded-xl","bg-surface-900","border","border-white/10","px-4","py-3","outline-none","focus:border-brand-500"],["class","mt-1 text-xs text-red-400",4,"ngIf"],[1,"relative"],["formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","autocomplete","current-password",1,"w-full","rounded-xl","bg-surface-900","border","border-white/10","px-4","py-3","pr-16","outline-none","focus:border-brand-500",3,"type"],["type","button",1,"absolute","inset-y-0","right-2","my-auto","px-2","rounded-lg","hover:bg-white/5",3,"click"],["type","submit",1,"w-full","rounded-xl","border-2","border-dashed","border-brand-500/70","text-brand-500","font-semibold","py-3","hover:bg-brand-500","hover:text-black","transition","disabled:opacity-60","disabled:cursor-not-allowed","focus-visible:outline-none","focus-visible:ring-2","focus-visible:ring-brand-500",3,"disabled"],[1,"text-center","text-sm","text-textc-mute","mt-2"],["routerLink","/",1,"text-brand-500","hover:text-brand-600"],[1,"mb-4","rounded-xl","border","border-green-500/40","bg-green-500/10","px-4","py-3","text-green-300","text-center"],[1,"mb-4","rounded-xl","border","border-red-500/40","bg-red-500/10","px-4","py-3","text-red-300","text-center","whitespace-pre-line"],[1,"mt-1","text-xs","text-red-400"]],template:function(o,e){o&1&&(t(0,"div",0)(1,"main",1)(2,"section",2)(3,"div",3)(4,"h1",4),a(5,"Inicia sesi\xF3n"),r(),u(6,T,2,1,"div",5)(7,D,2,1,"div",6),t(8,"form",7),b("ngSubmit",function(){return e.submit()}),t(9,"div")(10,"label",8),a(11,"Correo electr\xF3nico"),r(),c(12,"input",9),u(13,G,2,0,"p",10),r(),t(14,"div")(15,"label",8),a(16,"Contrase\xF1a"),r(),t(17,"div",11),c(18,"input",12),t(19,"button",13),b("click",function(){return e.hide=!e.hide}),a(20),r()(),u(21,V,2,0,"p",10),r(),t(22,"button",14),a(23),r(),t(24,"div",15)(25,"a",16),a(26,"Volver al inicio"),r()()()()()()()),o&2&&(n(6),l("ngIf",e.okMsg),n(),l("ngIf",e.errorMsg),n(),l("formGroup",e.form),n(5),l("ngIf",e.form.controls.email.touched&&e.form.controls.email.invalid),n(5),l("type",e.hide?"password":"text"),n(2),d(" ",e.hide?"Mostrar":"Ocultar"," "),n(),l("ngIf",e.form.controls.password.touched&&e.form.controls.password.invalid),n(),l("disabled",e.saving||e.form.invalid),n(),d(" ",e.saving?"Entrando...":"Entrar"," "))},dependencies:[L,k,w,M,S,E,I,x,v,y],styles:["[_nghost-%COMP%]{display:block}"]})};export{N as Login};
