import{a as w}from"./chunk-F2O2KMQN.js";import{a as m1,b as U,c as L,d as w1,e as f1,f as C1}from"./chunk-BMDPQX4J.js";import{a as I1}from"./chunk-Y5NMKK7J.js";import{$a as k1,Ca as x,Da as p1,Db as v1,Ga as v,M as j,Mb as D,N as c1,Nb as T,P as h1,R as k,Sa as y,Sb as R,T as d1,Ta as o,Ua as s,Va as m,Wa as B,X as S,Xa as F,Y as b,Ya as z,Yb as g1,Za as f,Zb as x1,_a as l,_b as L1,a as $,ab as l1,b as Y,da as o1,ea as A,eb as n,fb as C,ga as i1,gb as I,ha as s1,j as e1,ka as n1,n as a1,pb as u1,qb as X,sa as r1,ta as i,wa as y1,x as t1,xa as q,yb as M1}from"./chunk-4VXNIXON.js";var r2=["*"];var S1=[["path",{d:"M12 6.528V3a1 1 0 0 1 1-1h0",key:"11qiee"}],["path",{d:"M18.237 21A15 15 0 0 0 22 11a6 6 0 0 0-10-4.472A6 6 0 0 0 2 11a15.1 15.1 0 0 0 3.763 10 3 3 0 0 0 3.648.648 5.5 5.5 0 0 1 5.178 0A3 3 0 0 0 18.237 21",key:"110c12"}]];var b1=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}]];var q1=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M8 11h8",key:"vwpz6n"}],["path",{d:"M8 7h6",key:"1f0q6e"}]];var A1=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]];var z1=[["path",{d:"M11 13v4",key:"vyy2rb"}],["path",{d:"M15 5v4",key:"1gx88a"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["rect",{x:"7",y:"13",width:"9",height:"4",rx:"1",key:"1iip1u"}],["rect",{x:"7",y:"5",width:"12",height:"4",rx:"1",key:"1anskk"}]];var H1=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]];var V1=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]];var P1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]];var j1=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]];var B1=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]];var F1=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]];var D1=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]];var T1=[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]];var R1=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]];var U1=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]];var O1=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]];var G1=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]];var E1=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]];var W1=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]];var Z1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]];var _1=[["path",{d:"m15 11-1 9",key:"5wnq3a"}],["path",{d:"m19 11-4-7",key:"cnml18"}],["path",{d:"M2 11h20",key:"3eubbj"}],["path",{d:"m3.5 11 1.6 7.4a2 2 0 0 0 2 1.6h9.8a2 2 0 0 0 2-1.6l1.7-7.4",key:"yiazzp"}],["path",{d:"M4.5 15.5h15",key:"13mye1"}],["path",{d:"m5 11 4-7",key:"116ra9"}],["path",{d:"m9 11 1 9",key:"1ojof7"}]];var X1=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]];var N1=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]];var K1=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]];var Q1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]];var J1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]];var $1=[["path",{d:"M18 21V10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1v11",key:"pb2vm6"}],["path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 1.132-1.803l7.95-3.974a2 2 0 0 1 1.837 0l7.948 3.974A2 2 0 0 1 22 8z",key:"doq5xv"}],["path",{d:"M6 13h12",key:"yf64js"}],["path",{d:"M6 17h12",key:"1jwigz"}]];var H={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},N=new h1("LucideIcons",{factory:()=>new V({})}),V=class{constructor(t){this.icons=t}getIcon(t){return this.hasIcon(t)?this.icons[t]:null}hasIcon(t){return typeof this.icons=="object"&&t in this.icons}},y2=(()=>{class a{constructor(){this.color=H.stroke,this.size=H.width,this.strokeWidth=H["stroke-width"],this.absoluteStrokeWidth=!1}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=j({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function p2(a,t=3){return parseFloat(a.toFixed(t)).toString(10)}var Y1=(()=>{class a{constructor(e,c,d,p,h){this.elem=e,this.renderer=c,this.changeDetector=d,this.iconProviders=p,this.iconConfig=h,this.absoluteStrokeWidth=!1,this.defaultSize=H.height}get size(){return this._size??this.iconConfig.size}set size(e){e?this._size=this.parseNumber(e):delete this._size}get strokeWidth(){return this._strokeWidth??this.iconConfig.strokeWidth}set strokeWidth(e){e?this._strokeWidth=this.parseNumber(e):delete this._strokeWidth}ngOnChanges(e){if(e.name||e.img||e.color||e.size||e.absoluteStrokeWidth||e.strokeWidth||e.class){this.color=this.color??this.iconConfig.color,this.size=this.parseNumber(this.size??this.iconConfig.size),this.strokeWidth=this.parseNumber(this.strokeWidth??this.iconConfig.strokeWidth),this.absoluteStrokeWidth=this.absoluteStrokeWidth??this.iconConfig.absoluteStrokeWidth;let c=this.img??this.name;if(typeof c=="string"){let d=this.getIcon(this.toPascalCase(c));if(d)this.replaceElement(d);else throw new Error(`The "${c}" icon has not been provided by any available icon providers.`)}else if(Array.isArray(c))this.replaceElement(c);else throw new Error("No icon name or image has been provided.")}this.changeDetector.markForCheck()}replaceElement(e){let c=Y($({},H),{width:this.size,height:this.size,stroke:this.color??this.iconConfig.color,"stroke-width":this.absoluteStrokeWidth?p2(this.strokeWidth/(this.size/this.defaultSize)):this.strokeWidth.toString(10)}),d=this.createElement(["svg",c,e]);d.classList.add("lucide"),typeof this.name=="string"&&d.classList.add(`lucide-${this.name.replace("_","-")}`),this.class&&d.classList.add(...this.class.split(/ /).map(h=>h.trim()).filter(h=>h.length>0));let p=this.elem.nativeElement.childNodes;for(let h of p)this.renderer.removeChild(this.elem.nativeElement,h);this.renderer.appendChild(this.elem.nativeElement,d)}toPascalCase(e){return e.replace(/(\w)([a-z0-9]*)(_|-|\s*)/g,(c,d,p)=>d.toUpperCase()+p.toLowerCase())}parseNumber(e){if(typeof e=="string"){let c=parseInt(e,10);if(isNaN(c))throw new Error(`${e} is not numeric.`);return c}return e}getIcon(e){for(let c of Array.isArray(this.iconProviders)?this.iconProviders:[this.iconProviders])if(c.hasIcon(e))return c.getIcon(e);return null}createElement([e,c,d=[]]){let p=this.renderer.createElement(e,"http://www.w3.org/2000/svg");return Object.keys(c).forEach(h=>{let M=typeof c[h]=="string"?c[h]:c[h].toString(10);this.renderer.setAttribute(p,h,M)}),d.length&&d.forEach(h=>{let M=this.createElement(h);this.renderer.appendChild(p,M)}),p}}return a.\u0275fac=function(e){return new(e||a)(q(n1),q(y1),q(v1),q(N),q(y2))},a.\u0275cmp=x({type:a,selectors:[["lucide-angular"],["lucide-icon"],["i-lucide"],["span-lucide"]],inputs:{class:"class",name:"name",img:"img",color:"color",absoluteStrokeWidth:"absoluteStrokeWidth",size:"size",strokeWidth:"strokeWidth"},standalone:!1,features:[s1],ngContentSelectors:r2,decls:1,vars:0,template:function(e,c){e&1&&(k1(),l1(0))},encapsulation:2}),a})(),K=class{constructor(t){this.icons=t}},k2=a=>new V(a??{}),O=(()=>{class a{static pick(e){return{ngModule:a,providers:[{provide:N,multi:!0,useValue:new V(e)},{provide:N,multi:!0,useFactory:k2,deps:[[new i1,K]]}]}}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=p1({type:a}),a.\u0275inj=c1({imports:[[]]}),a})();var t2=a=>[a];function M2(a,t){if(a&1&&(o(0,"li")(1,"a",21),m(2,"lucide-icon",15),o(3,"span"),n(4),s()()()),a&2){let e=t.$implicit;i(),y("routerLink",e.link?X(3,t2,e.link):null),i(),y("name",e.icon),i(2),C(e.label)}}function v2(a,t){if(a&1&&(o(0,"ul",19),v(1,M2,5,5,"li",20),s()),a&2){let e=l(2).$implicit;i(),y("ngForOf",e.hijos)}}function m2(a,t){if(a&1){let e=z();o(0,"div",13)(1,"div",14),f("click",function(d){S(e);let p=l().$implicit,h=l();return b(h.toggleExpanded(p.id,d))}),m(2,"lucide-icon",15),o(3,"span",16),n(4),s(),m(5,"lucide-icon",17),s(),v(6,v2,2,1,"ul",18),s()}if(a&2){let e=l().$implicit,c=l();i(2),y("name",e.icon),i(2),C(e.label),i(),y("name",c.isExpanded(e.id)?"ChevronDown":"ChevronRight"),i(),y("ngIf",c.isExpanded(e.id))}}function g2(a,t){if(a&1&&(o(0,"a",22),m(1,"lucide-icon",15),o(2,"span"),n(3),s()()),a&2){let e=l().$implicit;y("routerLink",e.link?X(3,t2,e.link):null),i(),y("name",e.icon),i(2),C(e.label)}}function x2(a,t){if(a&1&&(o(0,"li",10),v(1,m2,7,4,"div",11)(2,g2,4,5,"a",12),s()),a&2){let e=t.$implicit;i(),y("ngIf",e.hijos&&e.hijos.length>0),i(),y("ngIf",!e.hijos||e.hijos.length===0)}}function L2(a,t){if(a&1&&(o(0,"div",23)(1,"div",24),n(2),s(),o(3,"div",25),n(4),s(),o(5,"div",25),n(6),s()()),a&2){let e=l();i(),y("title",e.usuario.nombre),i(),I(" ",e.usuario.nombre||"Sin nombre"," "),i(),y("title",e.usuario.rol),i(),I(" ",e.usuario.rol," "),i(),y("title",e.usuario.correo),i(),I(" ",e.usuario.correo," ")}}function w2(a,t){if(a&1){let e=z();o(0,"div",26),m(1,"div",27),o(2,"div",28)(3,"h3",29),n(4,"Confirmar acci\xF3n"),s(),o(5,"p",30),n(6,"\xBFSeguro que deseas cerrar sesi\xF3n?"),s(),o(7,"div",31)(8,"button",32),f("click",function(){S(e);let d=l();return b(d.closeLogoutConfirm())}),n(9," Cancelar "),s(),o(10,"button",33),f("click",function(){S(e);let d=l();return b(d.doLogoutConfirmado())}),n(11," Aceptar "),s()()()()}}var e2={"/dashboard/overview":"LayoutDashboard","/dashboard/usuarios":"User","/dashboard/compras":"ShoppingCart","/dashboard/ventas":"ShoppingBasket","/dashboard/categorias":"Tag","/dashboard/roles":"Key","/dashboard/productos":"Apple","/dashboard/unidades-medidas":"Ruler","/dashboard/unidades-medida":"Ruler","/dashboard/permisos":"ShieldCheck","/dashboard/tipos-identificaciones":"Fingerprint","/dashboard/tipos-identificacion":"Fingerprint","/dashboard/reportes/ventas":"BarChart","/dashboard/reportes/compras":"LineChart","/dashboard/reportes/inventario":"Box"},a2={Seguridad:"Lock",Inventario:"Warehouse",Operaciones:"Settings",Reportes:"FileText","Gesti\xF3n de Usuarios":"Users"},G=class a{auth=k(w);router=k(L);menu=[];expandedItems=new Set;usuario=null;ngOnInit(){this.loadMenuFromToken(),this.loadUserInfo()}loadMenuFromToken(){let t=this.auth.getFormulariosFromToken();t=t.filter(h=>h.titulo!=="Formularios");let e={id:"dashboard",label:"Dashboard",icon:"LayoutDashboard",link:"overview",hijos:[]},c=t.filter(h=>h.es_padre).sort((h,M)=>h.orden-M.orden),d=t.filter(h=>!h.es_padre&&h.url).filter((h,M,g)=>M===g.findIndex(r=>r.url&&h.url&&r.url===h.url||r.titulo===h.titulo&&r.padre===h.padre)),p=c.map(h=>{let M=d.filter(r=>r.padre===h.id).map(r=>{let u=r.url?.replace("/dashboard/","")||"";return u==="unidades-medida"&&(u="unidades-medidas"),u==="tipos-identificacion"&&(u="tipos-identificaciones"),u==="reportes/ventas"&&(u="reporte-ventas"),u==="reportes/compras"&&(u="reporte-compras"),u==="reportes/inventario"&&(u="reporte-inventario"),{id:`hijo-${r.id||r.titulo}`,label:r.titulo,icon:this.getIconForUrl(r.url||""),link:u}}).filter((r,u,n2)=>u===n2.findIndex(J=>J.link===r.link||J.label===r.label)).sort((r,u)=>r.label.localeCompare(u.label));if(M.length===0)return null;let g=`padre-${h.id||h.titulo}`;return this.expandedItems.add(g),{id:g,label:h.titulo,icon:this.getIconForPadre(h.titulo),link:null,hijos:M}}).filter(h=>h!==null);this.menu=[e,...p],console.log("\u{1F4CB} Men\xFA cargado desde JWT:",this.menu.length,"items en el men\xFA")}getIconForPadre(t){return a2[t]?a2[t]:"Box"}getIconForUrl(t){return e2[t]?e2[t]:t.includes("overview")?"LayoutDashboard":t.includes("usuario")?"User":t.includes("compra")?"ShoppingCart":t.includes("venta")?"ShoppingBasket":t.includes("categoria")?"Tag":t.includes("rol")?"Key":t.includes("producto")?"Apple":t.includes("unidad")||t.includes("medida")?"Ruler":t.includes("permiso")?"ShieldCheck":t.includes("identificacion")||t.includes("tipo")?"Fingerprint":"Box"}loadUserInfo(){let t=this.auth.getUserFromToken();if(t){let e=`${t.nombres||t.nombre||""} ${t.apellido1||""} ${t.apellido2||""}`.trim(),c=t.nombre_rol||t.rol||"Sin rol",d=t.email||t.correo||"Sin correo";this.usuario={nombre:e,rol:c,correo:d}}}logoutConfirmOpen=!1;openLogoutConfirm(){this.logoutConfirmOpen=!0}closeLogoutConfirm(){this.logoutConfirmOpen=!1}doLogoutConfirmado(){this.logoutConfirmOpen=!1,this.auth.clearSession(),this.router.navigate(["/login"],{replaceUrl:!0})}logout(){this.openLogoutConfirm()}toggleExpanded(t,e){e&&(e.stopPropagation(),e.preventDefault()),this.expandedItems.has(t)?this.expandedItems.delete(t):this.expandedItems.add(t)}isExpanded(t){return this.expandedItems.has(t)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=x({type:a,selectors:[["app-sidebar"]],decls:13,vars:3,consts:[["aria-label","Sidebar principal",1,"fixed","left-0","top-0","h-screen","w-64","bg-surface-900","text-textc-base","border-r","border-white/5","flex","flex-col","z-50"],[1,"h-16","flex","items-center","px-4","border-b","border-white/5"],[1,"flex","items-center","gap-2","font-extrabold","tracking-tight"],[1,"inline-block","h-6","w-6","rounded","bg-brand-500"],["role","menu",1,"flex-1","overflow-y-auto","overflow-x-auto","py-3"],["class","mb-1",4,"ngFor","ngForOf"],[1,"border-t","border-white/5","p-3","space-y-3"],["class","px-3 py-2 rounded-lg bg-surface-800/50 border border-white/5",4,"ngIf"],[1,"w-full","rounded-lg","bg-brand-600/10","text-brand-500","px-3","py-2","text-sm","hover:bg-brand-600/20","transition",3,"click"],["class","fixed inset-0 z-[60] flex items-center justify-center",4,"ngIf"],[1,"mb-1"],["class","mx-2",4,"ngIf"],["routerLinkActive","bg-surface-800 text-white","class","flex items-center gap-3 mx-2 px-3 py-2 rounded-lg hover:bg-surface-800 transition-colors",3,"routerLink",4,"ngIf"],[1,"mx-2"],[1,"flex","items-center","gap-3","px-3","py-2","rounded-lg","text-textc-mute","font-semibold","hover:bg-surface-800","cursor-pointer","transition-colors",3,"click"],[1,"w-5","h-5",3,"name"],[1,"flex-1"],[1,"w-4","h-4","transition-transform","duration-200",3,"name"],["class","ml-8 mt-1 space-y-1 transition-all duration-200 ease-in-out",4,"ngIf"],[1,"ml-8","mt-1","space-y-1","transition-all","duration-200","ease-in-out"],[4,"ngFor","ngForOf"],["routerLinkActive","bg-surface-800 text-white",1,"flex","items-center","gap-3","px-3","py-2","rounded-lg","hover:bg-surface-800","transition-colors",3,"routerLink"],["routerLinkActive","bg-surface-800 text-white",1,"flex","items-center","gap-3","mx-2","px-3","py-2","rounded-lg","hover:bg-surface-800","transition-colors",3,"routerLink"],[1,"px-3","py-2","rounded-lg","bg-surface-800/50","border","border-white/5"],[1,"text-sm","font-semibold","text-white","truncate",3,"title"],[1,"text-xs","text-textc-mute","truncate",3,"title"],[1,"fixed","inset-0","z-[60]","flex","items-center","justify-center"],[1,"absolute","inset-0","bg-black/60"],[1,"relative","z-[61]","w-full","max-w-md","rounded-2xl","bg-surface-800","border","border-white/10","p-6","shadow-xl"],[1,"text-lg","font-semibold","mb-2"],[1,"text-sm","text-textc-mute"],[1,"mt-6","flex","gap-3","justify-end"],["type","button",1,"rounded-xl","border","border-white/10","px-4","py-2","hover:bg-white/5",3,"click"],["type","button",1,"rounded-xl","bg-brand-500","text-black","font-semibold","px-4","py-2","hover:bg-brand-600",3,"click"]],template:function(e,c){e&1&&(o(0,"nav",0)(1,"div",1)(2,"a",2),m(3,"span",3),o(4,"span"),n(5,"FITCOMPANY"),s()()(),o(6,"ul",4),v(7,x2,3,2,"li",5),s(),o(8,"div",6),v(9,L2,7,6,"div",7),o(10,"button",8),f("click",function(){return c.openLogoutConfirm()}),n(11," Cerrar sesi\xF3n "),s()()(),v(12,w2,12,0,"div",9)),e&2&&(i(7),y("ngForOf",c.menu),i(2),y("ngIf",c.usuario),i(3),y("ngIf",c.logoutConfirmOpen))},dependencies:[O,Y1,w1,R,D,T],styles:["nav[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:rgba(132,204,22,.4) transparent}nav[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}nav[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}nav[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#84cc1666;border-radius:3px;transition:background .2s ease}nav[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#84cc1699}"]})};var E=class a{auth=k(w);router=k(L);ngOnInit(){this.auth.isAuthenticated()&&history.pushState(null,"",this.router.url)}ngOnDestroy(){}onPopState(t){this.auth.isAuthenticated()&&history.pushState(null,"",this.router.url)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=x({type:a,selectors:[["app-dashboard"]],hostBindings:function(e,c){e&1&&f("popstate",function(p){return c.onPopState(p)},r1)},decls:9,vars:0,consts:[[1,"min-h-screen","bg-surface-900","text-textc-base","flex"],[1,"flex-1","min-w-0","bg-surface-800","ml-64"],[1,"h-16","flex","items-center","justify-between","px-6","border-b","border-white/5","bg-surface-800/80"],[1,"text-lg","font-semibold"],[1,"p-6"],[1,""]],template:function(e,c){e&1&&(o(0,"div",0),m(1,"app-sidebar"),o(2,"section",1)(3,"header",2)(4,"h1",3),n(5,"Dashboard"),s()(),o(6,"main",4)(7,"div",5),m(8,"router-outlet"),s()()()())},dependencies:[G,U],encapsulation:2})};var c2=()=>{let a=k(w),t=k(L);return a.isAuthenticated()?!0:(t.navigate(["/login"]),!1)};var h2=()=>{let a=k(w),t=k(L);return a.isAuthenticated()?(t.navigate(["/dashboard"],{replaceUrl:!0}),!1):!0};var d2=[{path:"",loadComponent:()=>import("./chunk-TZWBTW5N.js").then(a=>a.Home)},{path:"login",canActivate:[h2],loadComponent:()=>import("./chunk-CJTIPTUG.js").then(a=>a.Login)},{path:"dashboard",canActivate:[c2],component:E,children:[{path:"overview",loadComponent:()=>import("./chunk-RW67D5AK.js").then(a=>a.Overview)},{path:"usuarios",loadComponent:()=>import("./chunk-6M7PF5IL.js").then(a=>a.Usuarios)},{path:"compras",loadComponent:()=>import("./chunk-755BZTLO.js").then(a=>a.Compras)},{path:"ventas",loadComponent:()=>import("./chunk-AUDGPX47.js").then(a=>a.Ventas)},{path:"categorias",loadComponent:()=>import("./chunk-K6CPBMWU.js").then(a=>a.Categorias)},{path:"roles",loadComponent:()=>import("./chunk-RCOHGTND.js").then(a=>a.Roles)},{path:"productos",loadComponent:()=>import("./chunk-MWM6ERDU.js").then(a=>a.Productos)},{path:"unidades-medidas",loadComponent:()=>import("./chunk-PK3A5CY7.js").then(a=>a.UnidadesMedidas)},{path:"permisos",loadComponent:()=>import("./chunk-MLKJIV3I.js").then(a=>a.Permisos)},{path:"tipos-identificaciones",loadComponent:()=>import("./chunk-YUAIGIFS.js").then(a=>a.TiposIdentificaciones)},{path:"reporte-ventas",loadComponent:()=>import("./chunk-VLKOPD76.js").then(a=>a.ReporteVentas)},{path:"reporte-compras",loadComponent:()=>import("./chunk-GISYYGRN.js").then(a=>a.ReporteCompras)},{path:"reporte-inventario",loadComponent:()=>import("./chunk-RIITTUX4.js").then(a=>a.ReporteInventario)},{path:"metodos-pago",loadComponent:()=>import("./chunk-5WKRP7N6.js").then(a=>a.MetodosPago)},{path:"",pathMatch:"full",redirectTo:"overview"}]},{path:"**",redirectTo:"login"}];function o2(){return d1(O.pick({LayoutDashboard:U1,ShoppingCart:X1,ShoppingBasket:_1,BookText:q1,ChartBarStacked:z1,UserCog:K1,IdCard:T1,Ruler:E1,ShieldCheck:Z1,Fingerprint:D1,User:Q1,Box:A1,ChevronDown:P1,ChevronRight:j1,Lock:O1,Warehouse:$1,Settings:W1,FileText:F1,Users:J1,Tag:N1,Package:G1,Apple:S1,Badge:b1,Crown:B1,Key:R1,BarChart:V1,LineChart:H1}))}var i2=(a,t)=>{let e=localStorage.getItem("fit_token"),c=k(L),d=k(w);if(!a.url.startsWith("http"))return t(a);let p=e?a.clone({setHeaders:{Authorization:`Bearer ${e}`}}):a;return t(p).pipe(t1(h=>((h?.status===401||h?.status===403)&&(d.clearSession(),c.navigate(["/login"],{replaceUrl:!0})),a1(()=>h))))};var s2={providers:[o1(),x1(L1([i2])),M1({eventCoalescing:!0}),f1(d2,C1({anchorScrolling:"enabled",scrollPositionRestoration:"enabled"})),o2()]};var W=class a{http=k(g1);baseProd=`${I1.apiBaseUrl}/productos`;alertsSub=new e1([]);alerts$=this.alertsSub.asObservable();pollTimer=null;constructor(){this.refresh(),this.pollTimer=setInterval(()=>this.refresh(),6e3);let t=()=>{document.visibilityState==="visible"&&this.refresh()};document.addEventListener("visibilitychange",t)}refresh(){this.http.get(this.baseProd).subscribe({next:t=>this.alertsSub.next(this.buildAlertsFromProducts(Array.isArray(t)?t:[])),error:()=>this.alertsSub.next([])})}buildAlertsFromProducts(t=[]){let e=new Map;for(let c of t){let d=Number(c.id_producto),p=c.nombre_producto,h=Number(c.stock_minimo??0),M=Number(c.stock_maximo??0),g=Number(c.stock_actual??0);if(Number.isFinite(h)&&Number.isFinite(g)&&g<h){let r=`MIN:${d}`;e.set(r,{key:r,code:"STOCK_BELOW_MIN",producto_id:d,title:"Alerta de inventario",message:`El producto "${p}" est\xE1 por debajo del m\xEDnimo configurado.`,meta:{min:h,actual:g,nombre:p},ts:Date.now()})}if(Number.isFinite(M)&&Number.isFinite(g)&&g>M){let r=`MAX:${d}`;e.set(r,{key:r,code:"STOCK_ABOVE_MAX",producto_id:d,title:"Alerta de inventario",message:`El producto "${p}" supera el m\xE1ximo configurado.`,meta:{max:M,actual:g,nombre:p},ts:Date.now()})}}return Array.from(e.values()).sort((c,d)=>c.producto_id-d.producto_id)}static \u0275fac=function(e){return new(e||a)};static \u0275prov=j({token:a,factory:a.\u0275fac,providedIn:"root"})};var f2=()=>[];function C2(a,t){if(a&1&&(B(0),n(1),o(2,"span",14),n(3),s(),F()),a&2){let e=l().$implicit;i(),I(" max: ",e.meta.max," \u2014 actual: "),i(2),C(e.meta.actual)}}function I2(a,t){if(a&1&&(B(0),n(1),o(2,"span",14),n(3),s(),F()),a&2){let e=l().$implicit;i(),I(" min: ",e.meta.min," \u2014 actual: "),i(2),C(e.meta.actual)}}function S2(a,t){if(a&1&&(o(0,"li",10)(1,"div",11),n(2),s(),o(3,"div",12),n(4),s(),o(5,"div",13),v(6,C2,4,2,"ng-container",0)(7,I2,4,2,"ng-container",0),s()()),a&2){let e=t.$implicit;i(2),C(e.title),i(2),C(e.message),i(2),y("ngIf",e.code==="STOCK_ABOVE_MAX"),i(),y("ngIf",e.code==="STOCK_BELOW_MIN")}}function b2(a,t){if(a&1&&(o(0,"div",5)(1,"div",6)(2,"div",7),n(3,"Alertas"),s()(),o(4,"ul",8),v(5,S2,8,4,"li",9),s()()),a&2){let e=l(2);i(5),y("ngForOf",e.alerts())}}function q2(a,t){if(a&1){let e=z();B(0),o(1,"button",1),f("click",function(){S(e);let d=l();return b(d.toggle())}),o(2,"span",2),n(3,"\u{1F6A8}"),s(),o(4,"span",3),n(5),s()(),v(6,b2,6,1,"div",4),F()}if(a&2){let e=l();i(5),I(" ",(e.alerts()||u1(2,f2)).length," "),i(),y("ngIf",e.open())}}var Z=class a{alertsSrv=k(W);open=A(!1);alerts=A(null);constructor(){this.alertsSrv.alerts$.subscribe(t=>this.alerts.set(t||[]))}toggle(){this.open.update(t=>!t)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=x({type:a,selectors:[["app-corner-alert-bell"]],decls:1,vars:1,consts:[[4,"ngIf"],["title","Alertas de inventario",1,"fixed","top-4","right-4","z-50","bg-surface-800","text-red-400","border","border-red-500/40","hover:border-red-500","transition","px-3","py-2","rounded-full","shadow",3,"click"],[1,"mr-2","text-xl","leading-none"],[1,"text-xs","bg-red-500","text-black","font-bold","px-2","py-[2px]","rounded"],["class","fixed top-14 right-4 z-50 w-[360px] max-h-[70vh] overflow-y-auto bg-surface-900 text-white border border-red-500/40 rounded-lg shadow-xl",4,"ngIf"],[1,"fixed","top-14","right-4","z-50","w-[360px]","max-h-[70vh]","overflow-y-auto","bg-surface-900","text-white","border","border-red-500/40","rounded-lg","shadow-xl"],[1,"flex","items-center","justify-between","px-4","py-3","border-b","border-red-500/30","sticky","top-0","bg-surface-900"],[1,"font-semibold","text-red-300"],[1,"divide-y","divide-white/10"],["class","px-4 py-3",4,"ngFor","ngForOf"],[1,"px-4","py-3"],[1,"text-sm","text-red-200","font-semibold"],[1,"text-sm","opacity-90"],[1,"mt-1","text-xs","text-white/70"],[1,"text-red-300","font-semibold"]],template:function(e,c){e&1&&v(0,q2,7,3,"ng-container",0),e&2&&y("ngIf",c.alerts()&&c.alerts().length>0)},dependencies:[R,D,T],encapsulation:2})};var _=class a{title=A("fitcompany-angular");static \u0275fac=function(e){return new(e||a)};static \u0275cmp=x({type:a,selectors:[["app-root"]],decls:2,vars:0,template:function(e,c){e&1&&m(0,"router-outlet")(1,"app-corner-alert-bell")},dependencies:[U,Z],encapsulation:2})};m1(_,s2).catch(a=>console.error(a));
